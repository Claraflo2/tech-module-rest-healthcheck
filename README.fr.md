![](https://dev.lutece.paris.fr/jenkins/buildStatus/icon?job=module-rest-healthcheck-deploy)
[![Alerte](https://dev.lutece.paris.fr/sonar/api/project_badges/measure?project=fr.paris.lutece.plugins%3Amodule-rest-healthcheck&metric=alert_status)](https://dev.lutece.paris.fr/sonar/dashboard?id=fr.paris.lutece.plugins%3Amodule-rest-healthcheck)
[![Line of code](https://dev.lutece.paris.fr/sonar/api/project_badges/measure?project=fr.paris.lutece.plugins%3Amodule-rest-healthcheck&metric=ncloc)](https://dev.lutece.paris.fr/sonar/dashboard?id=fr.paris.lutece.plugins%3Amodule-rest-healthcheck)
[![Coverage](https://dev.lutece.paris.fr/sonar/api/project_badges/measure?project=fr.paris.lutece.plugins%3Amodule-rest-healthcheck&metric=coverage)](https://dev.lutece.paris.fr/sonar/dashboard?id=fr.paris.lutece.plugins%3Amodule-rest-healthcheck)

# Plugin rest-healthcheck

## Introduction

Ce plugin permet de mettre en place un service REST de Healthcheck applicatif.

Ce service de healthcheck implémente les API du projet eclipse / microprofile-health

Plusieurs types de vérifications peuvent être effectuées.

## Configuration

Les classes de HealCheck doivent implémenter l'interface "IHealthCheck", et doivent être injectées dans la contexte.

Plusieurs implémentations sont proposées par défaut :

 
* test d'accès à la base de données
* test d'état forcé de l'instance (UP ou DOWN) stocké dans la table DATASTORE. La clé correspond au nom de l'instance + ".health"(le nom de l'instance est défini par la propriété lutece.webapp.instance). La valeur doit être "UP" (ou manquante) ou "Down".
* CPU Usage
* Memory usage

## Usage

Activer le plugin-rest et le module rest-healthcheck.

L'url de healthcheck sera de la forme :

http://[domain]/[webapp]/rest/healthcheck/api/v1/health

Le résultat renvoyé aura un statut 200 (OK) ou 503 (service unavailable) si l'un des tests est en échec.

Exemple : {"result":[{"name":"DB.Healthcheck","message":"SELECT 1","status":"UP"}],"status":"OK"}

@readiness HealthChecks: /rest/healthcheck/api/v1/health/ready

@liveness HealthChecks: /rest/healthcheck/api/v1/health/live


[Maven documentation and reports](https://dev.lutece.paris.fr/plugins/module-rest-healthcheck/)



 *generated by [xdoc2md](https://github.com/lutece-platform/tools-maven-xdoc2md-plugin) - do not edit directly.*